<%- include('partials/header', { title: title }) %>

<div class="container mt-4">
  <h3><%= title %></h3>
  <% if (message) { %><div class="alert alert-danger"><%= message %></div><% } %>

  <form action="<%= group ? ('/admin/product-group/edit/' + group.id) : '/admin/product-group/new' %>" method="post" enctype="multipart/form-data">
    <div class="mb-3">
      <label class="form-label">Tên nhóm</label>
      <input name="name" class="form-control" value="<%= group ? group.name : '' %>" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Mô tả</label>
      <textarea name="description" class="form-control" rows="4"><%= group ? group.description : '' %></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">Ảnh bìa (cover)</label>
      <input type="file" name="cover" class="form-control-file">
      <% if (group && group.cover) { %>
        <div class="mt-2">
          <img src="<%= group.cover %>" style="width:140px;">
        </div>
      <% } %>
    </div>

    <div class="mb-3">
      <label class="form-label">Vị trí (position)</label>
      <input name="position" type="number" class="form-control" value="<%= group ? group.position : 0 %>">
    </div>

    <button class="btn btn-primary">Lưu</button>
    <a href="/admin" class="btn btn-secondary">Hủy</a>
  </form>

  <% if (group) { %>
    <form action="/admin/product-group/delete" method="post" class="mt-3" onsubmit="return confirm('Xóa nhóm sẽ xóa tất cả sản phẩm thuộc nhóm. Tiếp tục?')">
      <input type="hidden" name="id" value="<%= group.id %>">
      <button class="btn btn-danger">Xóa nhóm</button>
    </form>
  <% } %>
</div>

<%- include('partials/footer') %>
