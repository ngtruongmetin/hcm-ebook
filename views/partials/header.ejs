<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title><%= "Địa phương số TP Hồ Chí Minh" %></title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* HEADER ------------------------------------------------------ */
    .top-banner {
      background: #327ba8;
      color: #fff;
      padding: 14px 0;
    }
    .banner-title h1 { margin:0; font-size:26px; font-weight:700; }

    /* META ROW ----------------------------------------------------- */
    .meta-row {
      background:#fff;
      border-bottom:1px solid #eee;
      padding:8px 10px;
      display:flex;
      align-items:center;
      gap:12px;
    }
    .meta-marquee{ overflow:hidden; white-space:nowrap; flex:1; }
    .meta-marquee .track { display:inline-block; padding-left:100%; animation:scroll-left 15s linear infinite; }
    @keyframes scroll-left { 0%{transform:translateX(0);}100%{transform:translateX(-100%);} }
    .meta-clock{ font-weight:600; }

    /* NAVBAR ------------------------------------------------------- */
    nav.site-nav {
      background:#c62828;
      position:relative;
      z-index:1000;
    }
    .site-nav .nav-link {
      color:#fff !important;
      padding:14px 18px;
      font-weight:700;
    }
    .site-nav .nav-link:hover {
      background:rgba(255,255,255,.15);
    }

    /* Mega container (full width) -------------------------------- */
    .mega-wrapper {
      position:absolute;
      left:0;
      right:0;
      top:100%;
      display:none;
      background:#d32f2f;
      padding:20px 30px;
      box-shadow:0 6px 20px rgba(0,0,0,0.25);
    }
    .mega-open .mega-wrapper { display:block; }

    .mega-inner {
      max-width:1250px;
      margin:auto;
      display:flex;
      justify-content:space-between;
      gap:20px;
    }

    .mega-col {
      flex:1;
      color:#fff;
    }
    .mega-col-title {
      font-size:18px;
      font-weight:700;
      margin-bottom:10px;
      text-transform:uppercase;
    }
    .mega-topic {
      color:#fff;
      display:block;
      margin-bottom:8px;
      padding-left:6px;
    }
    /* Make marquee text red + bold */
    .meta-marquee .track {
      color:#d32f2f !important;
      font-weight:700 !important;
    }

    /* Make clock text red + bold */
    .meta-clock {
      color:#d32f2f !important;
      font-weight:700 !important;
    }
        /* Hover navbar item → nền trắng + chữ đỏ */
    .site-nav .nav-link:hover,
    .mega-parent:hover > .nav-link {
      background:#fff !important;
      color:#c62828 !important;
    }

    /* Region title hover (cột tiêu đề) */
    .mega-col-title:hover,
    .mega-col-title a:hover {
      color:#ffffff !important; /* đỏ nhạt hơn */
      text-decoration: none;
    }

    /* Mega topic hover → nền trắng, chữ đỏ */
    .mega-topic:hover {
      background:#fff;
      color:#c62828 !important;
      padding-left:10px;          /* tạo hiệu ứng đẩy nhẹ */
      border-radius:4px;
      text-decoration:none !important;
    }

    /* Transition mượt */
    .nav-link, .mega-topic, .mega-col-title {
      transition: all .15s ease;
    }

    .mega-topic:hover { color:#ffe082; text-decoration:underline; }

    /* Remove caret ------------------------------------------------ */
    .dropdown-toggle::after { display:none !important; }

    @media(max-width:991px){
      .mega-wrapper{ display:none !important; }
    }
    /* Giữ nguyên font h1 khi bọc a */
    .brand-home-link {
      color: inherit !important;         /* giữ màu chữ của h1 */
      text-decoration: none !important;  /* bỏ gạch chân */
      font: inherit !important;          /* giữ font-size, font-weight, family */
      display: inline-block;             
    }

    /* Hover đẹp */
    .brand-home-link:hover {
      text-decoration: underline;
      opacity: 0.9;
    }
        /* Desktop only layout adjustments */
    @media (min-width: 992px) {
      /* đảm bảo ul dùng flex toàn bộ */
      .navbar-nav {
        width: 100%;
        display: flex;
        align-items: center;
      }

      /* Home ở đầu (HTML sẽ đặt trước) */
      .nav-item.home-item {
        margin-right: 12px;
      }



      /* nhóm các item cần nằm bên phải:
        đặt margin-left:auto cho phần tử đầu tiên trong nhóm để đẩy nhóm sang phải */
      .nav-item.right-group {
        margin-left: auto;
      }
      .nav-item.right-group + .nav-item.right-group {
        margin-left: 10px; /* khoảng cách giữa 2 nút bên phải */
      }

      /* sizing và hover cho icon home */
      .home-icon {
        width: 22px;
        height: 22px;
        vertical-align: middle;
        transition: transform .12s ease;
        display: inline-block;
      }
      .home-btn:hover .home-icon {
        transform: translateY(-2px);
      }

      /* hơi làm nổi bật 2 nút bên phải */
      .right-group .nav-link {
        font-weight:700;
      }
    }

    /* Trên mobile, vẫn hiển thị theo collapse bình thường */
    @media (max-width: 991px) {
      .nav-item.right-group {
        margin-left: 0;
      }
    }
    /* Mobile: thu nhỏ icon home */
    @media (max-width: 991px) {
      .home-icon {
        width: 25px !important;
        height: 25px !important;
      }
}

  </style>
  <link rel="icon" href="/public/defaults/favicon.ico">
</head>

<body>

<!-- BANNER ----------------------------------------------------- -->
<div class="top-banner">
  <div class="container">
    <div class="banner-title">
      <h1 style="margin:0;">
        <a href="/" class="brand-home-link">Địa phương số TP Hồ Chí Minh</a>
      </h1>

      <div style="font-size:13px">Nền tảng học liệu GDĐP cho học sinh THPT TP Hồ Chí Minh</div>
    </div>
  </div>
</div>
<!-- NAVBAR ----------------------------------------------------- -->
<nav class="site-nav navbar navbar-expand-lg">
  <div class="container">
    <button class="navbar-toggler btn btn-light" type="button" data-toggle="collapse" data-target="#mainNav">☰</button>

    <div class="collapse navbar-collapse" id="mainNav">
      <ul class="navbar-nav mr-auto">

        <!-- HOME (icon SVG) -->
        <li class="nav-item home-item">
          <a href="/" class="nav-link home-btn" aria-label="Trang chủ" title="Trang chủ">
            <!-- Simple home SVG (fill currentColor để kế thừa màu chữ) -->
            <svg class="home-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
              <path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
          </a>
        </li>
        <li class="nav-item"><a href="/tong-quan" class="nav-link">Tổng quan</a></li>

        <!-- MENU LỚP -->
        <% nav.forEach(cls => { %>
          <li class="nav-item mega-parent">
            <a href="/class/<%= cls.id %>" class="nav-link mega-btn"><%= cls.name %></a>

            <div class="mega-wrapper">
              <div class="mega-inner">
                <% cls.regions.forEach(reg => { %>
                  <div class="mega-col">
                    <div class="mega-col-title">
                      <a href="/class/<%= cls.id %>/region/<%= reg.id %>" style="color:#fff;text-decoration:none;">
                        <%= reg.name %>
                      </a>
                    </div>

                    <% if (reg.topics && reg.topics.length) { %>
                      <% reg.topics.forEach(t => { %>
                        <a class="mega-topic" href="/topic/<%= t.id %>">
                          <%= t.title %>
                        </a>
                      <% }); %>
                    <% } else { %>
                      <div class="mega-topic" style="color:#fff; text-decoration:none;">Chưa có chủ đề</div>
                    <% } %>
                  </div>
                <% }) %>
              </div>
            </div>
          </li>
        <% }) %>

        <!-- NHÓM BÊN PHẢI (Desktop only sẽ đẩy sang phải) -->
        <li class="nav-item right-group">
          <a href="/gioi-thieu" class="nav-link">Giới thiệu dự án</a>
        </li>
        <li class="nav-item right-group">
          <a href="/special/ky_uc_thoi_chien" class="nav-link">Ký ức thời chiến</a>
        </li>
        <li class="nav-item right-group">
          <a href="/tra-cuu-dvhc" class="nav-link">Tra cứu địa chỉ</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- META ------------------------------------------------------- -->
<!-- META (centered inside container) --------------------------- -->
<div class="meta-row">
  <div class="container d-flex align-items-center">
    <div id="metaClock" class="meta-clock mr-3"></div>
    <div class="meta-marquee" style="flex:1;">
      <span class="track">50 năm giáo dục TPHCM • Học liệu GDĐP • Kho bài học đầy đủ theo lớp – theo khu vực •</span>
    </div>
  </div>
</div>

<!-- CLOCK JS --------------------------------------------------- -->
<script>
  function updateMetaClock(){
    const el = document.getElementById("metaClock");
    const n = new Date();
    const d = ["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"][n.getDay()];
    el.textContent = `${d}, ${String(n.getDate()).padStart(2,'0')}/${String(n.getMonth()+1).padStart(2,'0')}/${n.getFullYear()} ${String(n.getHours()).padStart(2,'0')}:${String(n.getMinutes()).padStart(2,'0')}:${String(n.getSeconds()).padStart(2,'0')}`;
  }
  setInterval(updateMetaClock, 1000); updateMetaClock();


</script>
<!-- MEGA MENU --------------------------------------------------- -->
<script>
const megaParents = document.querySelectorAll('.mega-parent');

megaParents.forEach(parent => {
  const mega = parent.querySelector('.mega-wrapper');

  let openTimer = null;
  let closeTimer = null;

  // Hàm đóng tất cả mega khác ngay lập tức
  function closeOthers(except) {
    megaParents.forEach(p => {
      if (p !== except) p.classList.remove('mega-open');
    });
  }

  // Hover vào nút lớp
  parent.addEventListener('mouseenter', () => {
    if (closeTimer) clearTimeout(closeTimer);

    // đóng tất cả cái khác NGAY
    closeOthers(parent);

    openTimer = setTimeout(() => {
      parent.classList.add('mega-open');
    }, 0); // mở nhẹ chậm để dễ hover
  });

  // Rời khỏi nút lớp
  parent.addEventListener('mouseleave', () => {
    if (openTimer) clearTimeout(openTimer);

    closeTimer = setTimeout(() => {
      parent.classList.remove('mega-open');
    }, 100); // vẫn để chút để đi vào mega
  });

  // vào mega → giữ
  mega.addEventListener('mouseenter', () => {
    if (closeTimer) clearTimeout(closeTimer);
  });

  // rời mega
  mega.addEventListener('mouseleave', () => {
    closeTimer = setTimeout(() => {
      parent.classList.remove('mega-open');
    }, 100);
  });
});

</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
